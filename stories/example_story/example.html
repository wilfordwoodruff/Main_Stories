<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

  
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Example QMD File</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="example_files/libs/clipboard/clipboard.min.js"></script>
<script src="example_files/libs/quarto-html/quarto.js"></script>
<script src="example_files/libs/quarto-html/popper.min.js"></script>
<script src="example_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="example_files/libs/quarto-html/anchor.min.js"></script>
<link href="example_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="example_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="example_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="example_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="example_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Example QMD File</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This documentation provides a step-by-step guide on how to use a Quarto Markdown (QMD) file to wrangle data using a Python script. QMD allows you to seamlessly integrate code, visualizations, and explanatory text in a single document.</p>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<p>Before getting started, make sure you have the following prerequisites:</p>
<ul>
<li>Python installed on your machine.</li>
<li>An Integrated Development Environment (IDE) of your choice for Python programming.</li>
<li>Basic knowledge of Python programming.</li>
<li>Familiarity with the Quarto Markdown format.</li>
</ul>
</section>
<section id="getting-started" class="level1">
<h1>Getting Started</h1>
<p>To begin, follow these steps:</p>
<ol type="1">
<li>Create a new QMD file with a <code>.qmd</code> extension, such as <code>example.qmd</code>.</li>
<li>Set the necessary metadata and output format in the YAML front matter of your QMD file. For this example, we’ll use HTML output:</li>
</ol>
<!-- ```{python}
```
title: "Example QMD File"
output: html_document
```
``` -->
</section>
<section id="python-code-chunk" class="level1">
<h1>Python Code Chunk</h1>
<p>Now let’s add a Python code chunk to your QMD file that performs data wrangling tasks. Follow these steps:</p>
<ol type="1">
<li>Identify the Python script containing the wrangling functions. For this example, assume the script is named <code>wrangle.py</code>.</li>
<li>Create a new code chunk in your QMD file and specify the language as python.</li>
<li>Within the code chunk, import the necessary functions from the <code>wrangle.py</code> script and perform data wrangling operations:</li>
</ol>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wrangle_data <span class="im">import</span> read_data_from_url, wrangle_data</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/wilfordwoodruff/Main-Data/main/data/derived/derived_data.csv"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> read_data_from_url(url)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the wrangle_data function to wrangle the data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> wrangle_data(df)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform additional data manipulations or analyses as needed</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the resulting DataFrame</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Internal ID    Document Type  Parent ID  Order   
19              21          Letters      182.0      1  \
1313          1405          Letters      164.0      1   
1317          1409          Letters      165.0      1   
1321          1413          Letters      166.0      1   
1325          1417          Letters      167.0      1   
...            ...              ...        ...    ...   
22005        26886          Letters    42675.0      1   
22032        26918          Letters    42684.0      1   
22076        26962          Letters    10839.0      1   
22083        26969       Additional    42778.0      4   
22828        27909  Autobiographies    42658.0    350   

                                             Parent Name   
19     Letter to Phebe Whittemore Carter Woodruff, 30...  \
1313   Letter from Phebe Whittemore Carter Woodruff, ...   
1317   Letter from Phebe Whittemore Carter Woodruff, ...   
1321   Letter from Phebe Whittemore Carter Woodruff, ...   
1325   Letter from Phebe Whittemore Carter Woodruff, ...   
...                                                  ...   
22005  Letter from Arthur Stayner, 2 September 1889 [...   
22032  Letter from Arthur Stayner, 7 May 1889 [LE-39578]   
22076  Letter to Lucy Emily Woodruff, 17 December 188...   
22083  Religious- History of the St. George Temple, 2...   
22828  Autobiography 1883 Tullidge's Quarterly Magazi...   

                                       UUID   
19     e7c3d0c0-51ac-44f0-8af7-6a1a462d3538  \
1313   9303e39d-7985-46fd-b297-057830534a7f   
1317   6bc3119c-8bfd-4ff0-b39d-0dbcf5833310   
1321   7ec6d96b-57bb-451a-99c1-c50710b3599b   
1325   0094d5fd-0267-4362-b0ef-62fda6fc733f   
...                                     ...   
22005  ff186669-b1b7-44b2-8925-830c6d507c36   
22032  41765eec-8731-4de5-84db-d5dd6e40f760   
22076  c9a373d9-85b9-4e9e-b424-0c0c66099473   
22083  114c8c4f-a8ba-45b5-b9ee-7f3a24d346aa   
22828  bc2a7164-2729-4110-ae38-dc3583b950b1   

                                                    Name   
19     Letter to Phebe Whittemore Carter Woodruff, Se...  \
1313   Letter from Phebe Whittemore Carter Woodruff, ...   
1317   Letter from Phebe Whittemore Carter Woodruff, ...   
1321   Letter from Phebe Whittemore Carter Woodruff, ...   
1325   Letter from Phebe Whittemore Carter Woodruff, ...   
...                                                  ...   
22005                                          page_0001   
22032                                          page_0001   
22076                                          page_0001   
22083                                          page_0004   
22828                                          page_0350   

                                             Website URL   
19     https://wilfordwoodruffpapers.org/documents/77...  \
1313   https://wilfordwoodruffpapers.org/documents/83...   
1317   https://wilfordwoodruffpapers.org/documents/be...   
1321   https://wilfordwoodruffpapers.org/documents/ed...   
1325   https://wilfordwoodruffpapers.org/documents/b3...   
...                                                  ...   
22005  https://wilfordwoodruffpapers.org/documents/db...   
22032  https://wilfordwoodruffpapers.org/documents/10...   
22076  https://wilfordwoodruffpapers.org/documents/36...   
22083  https://wilfordwoodruffpapers.org/documents/2f...   
22828  https://wilfordwoodruffpapers.org/documents/10...   

                                      Short URL   
19       https://wilfordwoodruffpapers.org/p/KR  \
1313    https://wilfordwoodruffpapers.org/p/n1D   
1317    https://wilfordwoodruffpapers.org/p/r3k   
1321    https://wilfordwoodruffpapers.org/p/y3w   
1325    https://wilfordwoodruffpapers.org/p/DgY   
...                                         ...   
22005  https://wilfordwoodruffpapers.org/p/9Gq8   
22032  https://wilfordwoodruffpapers.org/p/E1J4   
22076  https://wilfordwoodruffpapers.org/p/E1A4   
22083  https://wilfordwoodruffpapers.org/p/OLOQ   
22828  https://wilfordwoodruffpapers.org/p/rV5B   

                                               Image URL   
19     https://wilford-woodruff-papers.nyc3.digitaloc...  \
1313   https://wilford-woodruff-papers.nyc3.digitaloc...   
1317   https://wilford-woodruff-papers.nyc3.digitaloc...   
1321   https://wilford-woodruff-papers.nyc3.digitaloc...   
1325   https://wilford-woodruff-papers.nyc3.digitaloc...   
...                                                  ...   
22005  https://wilford-woodruff-papers.nyc3.digitaloc...   
22032  https://wilford-woodruff-papers.nyc3.digitaloc...   
22076  https://wilford-woodruff-papers.nyc3.digitaloc...   
22083  https://wilford-woodruff-papers.nyc3.digitaloc...   
22828  https://wilford-woodruff-papers.nyc3.digitaloc...   

                                     Original Transcript   
19     &lt;p&gt;[[Farmington, Hartford County, Connecticut|...  \
1313   &lt;p&gt;[[Lee County, Iowa Territory|Lee County]] [...   
1317   &lt;p&gt;[[Montrose, Lee County, Iowa Territory|Mont...   
1321   &lt;p&gt;[[Montrose, Lee County, Iowa Territory|Mont...   
1325   &lt;p&gt;[[Montrose, Lee County, Iowa Territory|Mont...   
...                                                  ...   
22005  &lt;p&gt;OFFICE OF &lt;br/&gt;\nTHE UTAH SUGAR CO., &lt;br/&gt;\...   
22032  &lt;p&gt;[[Salt Lake City, Salt Lake County, Utah Te...   
22076  &lt;p&gt;[[Salt Lake City, Salt Lake County, Utah Te...   
22083  &lt;p&gt;[redacted]&lt;/p&gt;\n\n&lt;p&gt;I parted with Presiden...   
22828  &lt;p&gt;power and glory in the dust.&lt;/p&gt;\n\n&lt;p&gt;My p...   

                                    Text Only Transcript   
19     [[Farmington, Hartford County, Connecticut|Far...  \
1313   [[Lee County, Iowa Territory|Lee County]] [[Co...   
1317   [[Montrose, Lee County, Iowa Territory|Montros...   
1321   [[Montrose, Lee County, Iowa Territory|Montros...   
1325   [[Montrose, Lee County, Iowa Territory|Montros...   
...                                                  ...   
22005  OFFICE OF \nTHE UTAH SUGAR CO., \nP. O. BOX 49...   
22032  [[Salt Lake City, Salt Lake County, Utah Terri...   
22076  [[Salt Lake City, Salt Lake County, Utah Terri...   
22083  [redacted]\n\nI parted with President [[Brigha...   
22828  power and glory in the dust.\n\nMy prayer to G...   

                                                  People   
19     Aphek Woodruff, b. 1778|Eunice Hart Woodruff W...  \
1313            Sarah Emma Woodruff|Wilford Woodruff Jr.   
1317   Alfred Cordon|John Edward Page|Orson Hyde|Timo...   
1321   Brother Meacham|Mr. Killbourn|Sarah Emma Woodruff   
1325   Abraham Owen Smoot|Albert Smith|Azubah Hart Wo...   
...                                                  ...   
22005     George Quayle Cannon|Arthur Stayner|James Jack   
22032  George Quayle Cannon|Arthur Stayner|Joseph Fie...   
22076                                Lucy Emily Woodruff   
22083  Brigham Young|Brigham Young Jr.|John Daniel Th...   
22828  Jesse Haven|James Knox Polk|Edson Whipple|Fran...   

                                                  Places  First Date   
19     Albany, Albany County, New York|Buffalo, Erie ...  1839-09-30  \
1313   Commerce, Hancock County, Illinois|Lee County,...  1840-07-18   
1317   Burslem, Staffordshire, England|England|Liverp...  1840-07-02   
1321   England|Farmington, Hartford County, Connectic...  1840-03-08   
1325   England|Lee County, Iowa Territory|Montrose, L...  1840-05-09   
...                                                  ...         ...   
22005  Salt Lake City, Salt Lake County, Utah Territo...  1889-09-02   
22032  Salt Lake City, Salt Lake County, Utah Territo...  1889-05-07   
22076  Salt Lake City, Salt Lake County, Utah Territo...  1881-12-17   
22083  Salt Lake City, Salt Lake County, Utah Territo...  1883-03-26   
22828  Boston, Suffolk County, Massachusetts|England|...  1846-01-23   

                       Dates   
19                1839-09-30  \
1313              1840-07-18   
1317              1840-07-02   
1321              1840-03-08   
1325              1840-05-09   
...                      ...   
22005             1889-09-02   
22032             1889-05-07   
22076             1881-12-17   
22083             1883-03-26   
22828  1849-03-04|1849-03-13   

                                                  Topics  
19                     preached|health|family|Saint|poor  
1313   called|angel|heaven|feelings|Elders|death|comm...  
1317            mission|feelings|health|prosperity||poor  
1321   dream|God|Sabbath|will of God|evil|desire|frie...  
1325   Book of Mormon|Jews|mission|hand of God|ordain...  
...                                                  ...  
22005                                              Utah|  
22032                                               Utah  
22076                                         Utah|books  
22083                              Temple|Utah|testimony  
22828                                             Israel  

[3808 rows x 17 columns]</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Make sure to replace the URL “https://raw.githubusercontent.com/wilfordwoodruff/Main-Data/main/data/derived/derived_data.csv” with the appropriate URL pointing to your data source.</li>
</ol>
</section>
<section id="running-the-code" class="level1">
<h1>Running the Code</h1>
<p>To run the Python code within your QMD file and observe the data wrangling results, follow these steps:</p>
<ol type="1">
<li>Open your preferred IDE for Python programming.</li>
<li>Create a new Python file (if necessary) and implement the wrangle_data and related functions within the wrangle.py script.</li>
<li>Switch back to your QMD file (example.qmd) in your chosen IDE.</li>
</ol>
<p>Next, we’ll run the Python code:</p>
<ol type="1">
<li>Save all changes to your wrangle.py and example.qmd files.</li>
<li>Run the Python code by executing the QMD file using your IDE’s respective method. Refer to the documentation or guidelines of your IDE for specific instructions on running Quarto Markdown files.</li>
</ol>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Congratulations! You have successfully created a QMD file that utilizes a Python script to wrangle data.</p>
<p>This example showcases the capabilities of QMD files by incorporating a Python code chunk. The code imports the <code>wrangle_data</code> function from the <code>wrangle.py</code> script, loads data into a DataFrame, performs wrangling operations using the function, and prints the resulting DataFrame.</p>
<p>Note that the <code>wrangle.py</code> script and <code>derived_data.csv</code> file are assumed to be in the same directory as the <code>.qmd</code> file. Adjust the import statement and file path if they are in a different directory.</p>
<p>By using your preferred IDE, you can execute the Python code within the QMD file and observe the data wrangling results in the desired environment.</p>
<p>Feel free to explore and expand upon this example to incorporate more complex code and analysis into your QMD files.</p>
</section>
<section id="further-resources" class="level1">
<h1>Further Resources</h1>
<p>For more information on Quarto Markdown and its capabilities, refer to the <a href="https://quarto.org/docs/guide/">official Quarto documentation and guides</a>.</p>
<p>This documentation provides a high-level overview of how to use a Quarto Markdown (QMD) file to wrangle data using a Python script. The code chunk provided demonstrates the steps involved in importing functions from a separate script, loading data from the specified URL into a DataFrame, applying wrangling operations, and printing the resulting DataFrame.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>